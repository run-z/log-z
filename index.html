<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Log Z</title>
	<meta name="description" content="Documentation for Log Z">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">Log Z</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>Log Z</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#log-that" id="log-that" style="color: inherit; text-decoration: none;">
					<h1>Log That</h1>
				</a>
				<p><a href="https://www.npmjs.com/package/@run-z/log-z"><img src="https://img.shields.io/npm/v/@run-z/log-z.svg?logo=npm" alt="NPM"></a>
					<a href="https://github.com/run-z/log-z/actions?query=workflow%3ABuild"><img src="https://github.com/run-z/log-z/workflows/Build/badge.svg" alt="Build Status"></a>
					<a href="https://codecov.io/gh/run-z/log-z"><img src="https://codecov.io/gh/run-z/log-z/branch/master/graph/badge.svg" alt="codecov"></a>
					<a href="https://github.com/run-z/log-z"><img src="https://img.shields.io/static/v1?logo=github&label=GitHub&message=project&color=informational" alt="GitHub Project"></a>
				<a href="https://run-z.github.io/log-z/"><img src="https://img.shields.io/static/v1?logo=typescript&label=API&message=docs&color=informational" alt="API Documentation"></a></p>
				<p>Logging library for browsers and Node.js.</p>
				<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
					<h2>Examples</h2>
				</a>
				<p>Default logger:</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { logZ } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z&#x27;</span>;

<span class="hljs-keyword">const</span> logger = logZ();  <span class="hljs-comment">// Create default logger to `console`.</span>

logger.info(<span class="hljs-string">&#x27;Message&#x27;</span>); <span class="hljs-comment">// Logs with `console.info()`.</span>
logger.error(<span class="hljs-string">&#x27;Error&#x27;</span>);  <span class="hljs-comment">// Logs with `console.error()`.</span>
logger.debug(<span class="hljs-string">&#x27;Debug&#x27;</span>);  <span class="hljs-comment">// Messages below &quot;Warning&quot; discarded by default.</span></code></pre>
				<p>Logger that logs all messages, including debug and trace.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { logZ, zlogDetails } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z&#x27;</span>;

<span class="hljs-comment">// Create default logger to `console` that logs all messages.</span>
<span class="hljs-keyword">const</span> logger = logZ({ <span class="hljs-attr">atLeast</span>: <span class="hljs-number">0</span> });

logger.debug(<span class="hljs-string">&#x27;Debug&#x27;</span>);  <span class="hljs-comment">// Logs with `console.log()`.</span>
logger.trace(<span class="hljs-string">&#x27;Without stack trace&#x27;</span>); <span class="hljs-comment">// Logs with `console.debug()`.</span>
logger.trace(<span class="hljs-string">&#x27;With stack trace&#x27;</span>, zlogDetails({ <span class="hljs-attr">stackTrace</span>: <span class="hljs-literal">true</span> })); <span class="hljs-comment">// Logs with `console.trace()`.</span></code></pre>
				<a href="#nodejs-support" id="nodejs-support" style="color: inherit; text-decoration: none;">
					<h2>Node.js Support</h2>
				</a>
				<p>Log to file</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { logZ, zlogDEBUG } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z&#x27;</span>;
<span class="hljs-keyword">import</span> { logZToFile } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z/node&#x27;</span>;

<span class="hljs-comment">// Create a file logger to `test.log`.</span>
<span class="hljs-keyword">const</span> fileLogger = logZ({ <span class="hljs-attr">atLeast</span>: zlogDEBUG, <span class="hljs-attr">by</span>: logZToFile(<span class="hljs-string">&#x27;test.log&#x27;</span>) });

fileLogger.debug(<span class="hljs-string">&#x27;Message&#x27;</span>);
<span class="hljs-comment">// [DEBUG] Message</span>

<span class="hljs-comment">// Create a daily rolling file logger.</span>
<span class="hljs-keyword">const</span> rollingLogger = logZ({
  <span class="hljs-attr">by</span>: logZToFile(<span class="hljs-function">() =&gt;</span> {

    <span class="hljs-keyword">const</span> now = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();

    <span class="hljs-keyword">return</span> <span class="hljs-string">`test.<span class="hljs-subst">${now.getFullYear()}</span>-<span class="hljs-subst">${now.getMonth() + <span class="hljs-number">1</span>}</span>-<span class="hljs-subst">${now.getDate()}</span>.log`</span>;
  }),
})</code></pre>
				<p>Log to arbitrary stream</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { logZ, zlogDEBUG } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z&#x27;</span>;
<span class="hljs-keyword">import</span> { logZToStream } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z/node&#x27;</span>;

<span class="hljs-comment">// Create a stdout logger.</span>
<span class="hljs-keyword">const</span> streamLogger = logZ({ <span class="hljs-attr">atLeast</span>: zlogDEBUG, <span class="hljs-attr">by</span>: logZToStream(process.stdout) });

streamLogger.info(<span class="hljs-string">&#x27;Message&#x27;</span>);
<span class="hljs-comment">// [INFO ] Message</span></code></pre>
				<a href="#log-messages" id="log-messages" style="color: inherit; text-decoration: none;">
					<h2>Log Messages</h2>
				</a>
				<p>A log message is an object with the following properties:</p>
				<ul>
					<li><p><code>level</code> - numeric log level. A <code>ZLogLevel</code> enum can be used to specify one of predefined levels:</p>
						<ul>
							<li><code>Fatal</code> - The service/app is going to stop or become unusable now.
							An operator should definitely look into this soon.</li>
							<li><code>Error</code> - Fatal for a particular request, but the service/app continues servicing other requests.
							An operator should look at this soon(ish).</li>
							<li><code>Warning</code> - A note on something that should probably be looked at by an operator eventually.</li>
							<li><code>Info</code> - Detail on regular operation.</li>
							<li><code>Debug</code> - Anything else, i.e. too verbose to be included in &quot;info&quot; level.     </li>
							<li><code>Trace</code> - Logging from external libraries used by your app or very detailed application logging.</li>
						</ul>
					</li>
					<li><p><code>text</code> - Human-readable message text.</p>
						<p>May be empty when unspecified.</p>
					</li>
					<li><p><code>error</code> - An error to log, if any.</p>
					</li>
					<li><p><code>details</code> - Message details map.</p>
						<p>The keys of this map are specific to application or log recorder implementation.</p>
					</li>
					<li><p><code>extra</code> - Array of extra uninterpreted parameters of passed to the logging method.   </p>
					</li>
				</ul>
				<p>The <code>record()</code> method of the <a href="https://run-z.github.io/log-z/classes/@run-z_log-z.ZLogger.html">logger</a> logs such messages.</p>
				<p>The <a href="https://run-z.github.io/log-z/classes/@run-z_log-z.ZLogger.html">logger</a> also has more convenient methods accepting arbitrary parameters and corresponding to each predefined log
				levels, like <code>info()</code> and <code>error()</code>, <code>warn()</code>, <code>trace()</code>, etc. Each of these methods treats arguments as following:</p>
				<ul>
					<li>Treats the first textual argument as message text.</li>
					<li>Treats the first special value created by <a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#zlogError">zlogError</a> function or the first <code>Error</code> instance as an error.</li>
					<li>Treats error message as a message text, unless there is another textual argument.</li>
					<li>Treats special values created by <a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#zlogDetails">zlogDetails</a> function as additional message details.</li>
					<li>Treats special values created by <a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#zlogExtra">zlogExtra</a> function as additional uninterpreted message parameters.</li>
					<li>Treats anything else as uninterpreted message parameter.</li>
				</ul>
				<p>A <a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#zlogMessage">zlogMessage</a> function can be used to construct a log message, as well as level-specific ones, like <code>zlogDEBUG</code>
				or <code>zlogERROR</code>.</p>
				<a href="#log-formats" id="log-formats" style="color: inherit; text-decoration: none;">
					<h2>Log Formats</h2>
				</a>
				<p>The Node.js loggers write messages in predefined format by default:</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { logZ } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z&#x27;</span>;
<span class="hljs-keyword">import</span> { logZToStream } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z/node&#x27;</span>;

<span class="hljs-keyword">const</span> logger = logZ({ <span class="hljs-attr">by</span>: logZToStream(process.stdout) });

logger.info(<span class="hljs-string">&#x27;Message&#x27;</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;Failed&#x27;</span>), zlogDetails({ <span class="hljs-attr">detail1</span>: <span class="hljs-string">&#x27;value&#x27;</span>, <span class="hljs-attr">detail2</span>: <span class="hljs-number">2</span> }), <span class="hljs-string">&#x27;Extra 1&#x27;</span>, [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
<span class="hljs-comment">// [INFO ] Message (&quot;Extra 1&quot;, [2, 3]) { detail1: &quot;value&quot;; detail2: 2 } Error: Failed</span>
<span class="hljs-comment">//    at file:///.../example.mjs:6:24</span>
<span class="hljs-comment">//    at ModuleJob.run (internal/modules/esm/module_job.js:146:37)</span>
<span class="hljs-comment">//    at async Loader.import (internal/modules/esm/loader.js:182:24)</span>
<span class="hljs-comment">//    at async Object.loadESM (internal/process/esm_loader.js:84:5)</span></code></pre>
				<p>This format can be customized:</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { levelZLogField, logZ, messageZLogField, zlogDetails, zlogLevelName } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z&#x27;</span>;
<span class="hljs-keyword">import</span> { logZToStream } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z/node&#x27;</span>;

<span class="hljs-keyword">const</span> logger = logZ({
  <span class="hljs-attr">by</span>: logZToStream(
    process.stdout,
    {
      <span class="hljs-attr">format</span>: {
        <span class="hljs-attr">fields</span>: [
          <span class="hljs-string">&#x27;&gt;&gt;&gt; &#x27;</span>,
          levelZLogField(zlogLevelName),
          <span class="hljs-string">&#x27; &quot;&#x27;</span>,
          messageZLogField(),
          <span class="hljs-string">&#x27;&quot; &#x27;</span>,
          <span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> {
            line.write(<span class="hljs-built_in">JSON</span>.stringify(line.message.details));
          },
        ],
      },
    },
  ),
});

logger.info(<span class="hljs-string">&#x27;Message&#x27;</span>, zlogDetails({ <span class="hljs-attr">detail1</span>: <span class="hljs-string">&#x27;value&#x27;</span>, <span class="hljs-attr">detail2</span>: <span class="hljs-number">2</span> }));
<span class="hljs-comment">// &gt;&gt;&gt; Info &quot;Message&quot; {&quot;detail1&quot;:&quot;value&quot;,&quot;detail2&quot;:2}</span></code></pre>
				<p>Or completely replaced:</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { logZ, zlogDetails } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z&#x27;</span>;
<span class="hljs-keyword">import</span> { logZToStream } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@run-z/log-z/node&#x27;</span>;

<span class="hljs-keyword">const</span> logger = logZ({
  <span class="hljs-attr">by</span>: logZToStream(
    process.stdout,
    {
      <span class="hljs-attr">format</span>: <span class="hljs-built_in">JSON</span>.stringify,
    },
  ),
});

logger.info(<span class="hljs-string">&#x27;Message&#x27;</span>, zlogDetails({ <span class="hljs-attr">detail1</span>: <span class="hljs-string">&#x27;value&#x27;</span>, <span class="hljs-attr">detail2</span>: <span class="hljs-number">2</span> }));
<span class="hljs-comment">// {&quot;level&quot;:30,&quot;text&quot;:&quot;Message&quot;,&quot;details&quot;:{&quot;detail1&quot;:&quot;value&quot;,&quot;detail2&quot;:2},&quot;extra&quot;:[]}</span></code></pre>
				<a href="#custom-loggers" id="custom-loggers" style="color: inherit; text-decoration: none;">
					<h2>Custom Loggers</h2>
				</a>
				<p>Custom logger can be built by implementing a <a href="https://run-z.github.io/log-z/interfaces/@run-z_log-z.ZLogRecorder.html">ZLogRecorder</a> interface. The latter has three methods:</p>
				<ul>
					<li><p><code>record(message: ZLogMessage): void</code> - Records a log message.</p>
						<p>The actual logging of the message can be asynchronous.</p>
					</li>
					<li><p><code>whenLogged(which?: &#39;all&#39; | &#39;last&#39;): Promise&lt;boolean&gt;</code> - Awaits for the recorded message(s) to be either logged or
						discarded.  </p>
						<p>The optional <code>which</code> parrameter can be one of:</p>
						<ul>
							<li><code>&quot;all&quot;</code> to wait for all messages,</li>
							<li><code>&quot;last&quot;</code> (the default) to wait for the last recorded message only.</li>
						</ul>
					</li>
					<li><p><code>end(): Promise&lt;void&gt;</code> - Ends log recording and returns a promise resolved when recorder stopped.</p>
						<p>All messages discarded after this method call. </p>
					</li>
				</ul>
				<p>The <a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZ">logZ</a> and <a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZBy">logZBy</a> functions converts arbitrary <a href="https://run-z.github.io/log-z/interfaces/@run-z_log-z.ZLogRecorder.html">ZLogRecorder</a> to <a href="https://run-z.github.io/log-z/classes/@run-z_log-z.ZLogger.html">logger</a>. The former accepts additional
				parameters, e.g. is able to filter out some debug messages.</p>
				<a href="#additional-log-recorders" id="additional-log-recorders" style="color: inherit; text-decoration: none;">
					<h2>Additional Log Recorders</h2>
				</a>
				<p>There are several additional log recorders that can combine or modify the behavior of other recorders:</p>
				<ul>
					<li><a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZAtopOf">logZAtopOf</a> - Logs messages atop of the target log recorder.
						When it ends logging, the target recorder still can record messages.
					This, combined with <a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZWithDetails">logZWithDetails</a>, can be treated as &quot;child&quot; logger.</li>
					<li><a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZByAll">logZByAll</a> - Logs messages by all the given recorders.</li>
					<li><a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZByAny">logZByAny</a> - Logs messages by any of the given recorders.</li>
					<li><a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZTimestamp">logZTimestamp</a> - Timestamp log recorder.
					Adds a timestamp property to message details.</li>
					<li><a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZToBuffer">logZToBuffer</a> - A log buffer that can be drained to another log recorder.   </li>
					<li><a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZToConsole">logZToConsole</a> - Logs to global console. This is the default recorder used by <a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZ">logZ</a> function.</li>
					<li><a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZUpdated">logZUpdated</a> - Updates log messages.</li>
					<li><a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZWhenLevel">logZWhenLevel</a> - A log recorder of messages with required level.
					Messages not satisfying the condition either logged by another recorder, or discarded.</li>
					<li><a href="https://run-z.github.io/log-z/modules/@run-z_log-z.html#logZWithDetails">logZWithDetails</a> - Updates message details.     </li>
				</ul>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/@run-z_log-z.html">@run-<wbr>z/log-<wbr>z</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/@run-z_log-z_node.html">@run-<wbr>z/log-<wbr>z/node</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>